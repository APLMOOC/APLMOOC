
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../ch2/write/">
      
      
        <link rel="next" href="../part2/">
      
      
      <link rel="icon" href="../../assets/favicon.svg">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.4">
    
    
      
        <title>3.1 - Fun for Everyone - APL MOOC</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.bd3936ea.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CAPL385:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"APL385"}</style>
      
    
    
      <link rel="stylesheet" href="../../../styles/main.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="purple" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#fun-for-everyone" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="APL MOOC" class="md-header__button md-logo" aria-label="APL MOOC" data-md-component="logo">
      
  <img src="../../assets/apl.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            APL MOOC
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              3.1 - Fun for Everyone
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="purple" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../ch0/part1/" class="md-tabs__link">
          
  
  Course

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../credits/" class="md-tabs__link">
        
  
    
  
  Receiving ECTS Credits

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../login/" class="md-tabs__link">
        
  
    
  
  Log in

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="APL MOOC" class="md-nav__button md-logo" aria-label="APL MOOC" data-md-component="logo">
      
  <img src="../../assets/apl.svg" alt="logo">

    </a>
    APL MOOC
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Course
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Course
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    0 - The wonderful world of APL
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            0 - The wonderful world of APL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ch0/part1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.1 - Quirky and different
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ch0/part2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.2 - What's the big idea?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ch0/part3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.3 - Useful resources
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ch0/part4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.4 - About the course
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    1 - Getting your toes wet
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            1 - Getting your toes wet
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ch1/part1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.1 - Immediate execution mode
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ch1/part2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.2 - Basic operations and input
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ch1/part3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.3 - How do I type these characters?!?!?!?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ch1/part4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.4 - Order of execution
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ch1/part5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.5 - When things go wrong
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ch1/summary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.S - Summary
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ch1/read/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.R - Read exercises
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ch1/write/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.W - Write exercises
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2 - Variables, scalars, vectors, matrices
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            2 - Variables, scalars, vectors, matrices
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ch2/part1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.1 - Assignment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ch2/part2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.2 - Higher dimensional space
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ch2/part3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.3 - Arithmetic operations on vectors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ch2/part4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.4 - Nested arrays
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ch2/part5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.5 - A Musical Interlude
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ch2/summary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.S - Summary
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ch2/read/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.R - Read exercises
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ch2/write/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.W - Write exercises
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" checked>
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    3 - Functions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            3 - Functions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    3.1 - Fun for Everyone
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../part2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.2 - All the Math
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../part3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.3 - All Aboard
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../part4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.4 - Computer Graphics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../summary.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.S - Summary
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../read.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.R - Read exercises
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../write.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.W - Write exercises
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../credits/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Receiving ECTS Credits
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../login/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Log in
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="fun-for-everyone">Fun For Everyone</h1>
<p>Programming languages provide structured methods of storing and operating on data. Now that we know how data is structured in APL, it’s time to look at how operations on data are structured, more specifically, how to make your own operations from already existing ones.</p>
<p>One of the ways of defining a function, taking in array arguments and outputting an array result, is using direct functions, abbreviated dfn. (”dee-fun”) A dfn is a series of statements, where the special characters ⍺ and ⍵ represent the left and right arguments to the function. Functions always require a right argument. Let’s look at some simple examples.</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">F_to_C</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="p">(</span><span class="m">5</span><span class="w"> </span><span class="o">×</span><span class="w"> </span><span class="bp">⍵</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">32</span><span class="p">)</span><span class="o">÷</span><span class="m">9</span><span class="kt">}</span>
<span class="w">      </span><span class="nv">F_to_C</span><span class="w"> </span><span class="m">451</span>
<span class="m">232.7777778</span>
<span class="w">      </span><span class="nv">C_to_F</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="m">32</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="m">9</span><span class="w"> </span><span class="o">×</span><span class="w"> </span><span class="bp">⍵</span><span class="p">)</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="m">5</span><span class="kt">}</span>
<span class="w">      </span><span class="nv">C_to_F</span><span class="w"> </span><span class="m">¯273.15</span>
<span class="m">¯459.67</span>
<span class="w">      </span><span class="nv">C_to_F</span><span class="w"> </span><span class="nv">F_to_C</span><span class="w"> </span><span class="m">100</span>
<span class="m">100</span>

<span class="w">      </span><span class="nv">dB_to_B</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="bp">⍵</span><span class="o">÷</span><span class="m">10</span><span class="kt">}</span><span class="w"> </span><span class="c1">⍝ From decibels to bels </span>
<span class="w">      </span><span class="nv">dB_to_ratio</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="m">10</span><span class="o">*</span><span class="nv">dB_to_B</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="c1">⍝ From decibels back to a power ratio</span>
<span class="w">            </span><span class="nv">dB_to_ratio</span><span class="w"> </span><span class="m">60</span>
<span class="m">1000000</span>
<span class="w">      </span><span class="nv">dB_to_ratio</span><span class="w"> </span><span class="m">3</span>
<span class="m">1.995262315</span>

<span class="w">      </span><span class="nv">PHI</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">0.5</span><span class="o">×</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">5</span><span class="o">*</span><span class="m">.5</span><span class="w"> </span><span class="c1">⍝ golden ratio</span>
<span class="w">      </span><span class="nv">fibonacci</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="p">((</span><span class="nv">PHI</span><span class="o">*</span><span class="bp">⍵</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="o">-</span><span class="nv">PHI</span><span class="p">)</span><span class="o">*-</span><span class="bp">⍵</span><span class="p">)</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="p">(</span><span class="m">¯1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">2</span><span class="o">×</span><span class="nv">PHI</span><span class="p">)</span><span class="kt">}</span>
<span class="w">      </span><span class="nv">fibonacci</span><span class="w"> </span><span class="o">⍳</span><span class="m">7</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">13</span>
<span class="w">      </span><span class="nv">fibonacci</span><span class="w"> </span><span class="m">10</span>
<span class="m">55</span>

<span class="w">      </span><span class="nv">hypotenuse</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="p">((</span><span class="bp">⍺</span><span class="o">*</span><span class="m">2</span><span class="p">)</span><span class="o">+</span><span class="bp">⍵</span><span class="o">*</span><span class="m">2</span><span class="p">)</span><span class="o">*</span><span class="m">0.5</span><span class="kt">}</span><span class="w"> </span><span class="c1">⍝ Pythagorean theorem</span>
<span class="w">      </span><span class="m">3</span><span class="w"> </span><span class="nv">hypotenuse</span><span class="w"> </span><span class="m">4</span>
<span class="m">5</span>
<span class="w">      </span><span class="m">6</span><span class="w"> </span><span class="nv">hypotenuse</span><span class="w"> </span><span class="m">8</span>
<span class="m">10</span>
<span class="w">      </span><span class="m">5</span><span class="w"> </span><span class="nv">hypotenuse</span><span class="w"> </span><span class="m">12</span>
<span class="m">13</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nv">hypotenuse</span><span class="w"> </span><span class="m">3</span><span class="o">*</span><span class="m">.5</span>
<span class="m">2</span>
</code></pre></div>
<p>Note that for the Fibonacci function, a constant value phi for the golden ratio was used. If the value of phi is changed, the Fibonacci function will use the updated value. </p>
<p>APL allows any number of assignment statements inside a function before the statement which evaluates the result, using the diamond-shaped statement separator ⋄, or placing the statements on new lines. The following two functions are equivalent.</p>
<div class="highlight"><pre><span></span><code><span class="nv">fibonacci</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="nv">PHI</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">0.5</span><span class="o">×</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">5</span><span class="o">*</span><span class="m">.5</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="p">((</span><span class="nv">PHI</span><span class="o">*</span><span class="bp">⍵</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="o">-</span><span class="nv">PHI</span><span class="p">)</span><span class="o">*-</span><span class="bp">⍵</span><span class="p">)</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="p">(</span><span class="m">¯1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">2</span><span class="o">×</span><span class="nv">PHI</span><span class="p">)</span><span class="kt">}</span>
<span class="nv">fibonacci</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span>
<span class="w">             </span><span class="nv">PHI</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">0.5</span><span class="o">×</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">5</span><span class="o">*</span><span class="m">.5</span>
<span class="w">             </span><span class="p">((</span><span class="nv">PHI</span><span class="o">*</span><span class="bp">⍵</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="o">-</span><span class="nv">PHI</span><span class="p">)</span><span class="o">*-</span><span class="bp">⍵</span><span class="p">)</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="p">(</span><span class="m">¯1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">2</span><span class="o">×</span><span class="nv">PHI</span><span class="p">)</span>
<span class="w">            </span><span class="kt">}</span>
</code></pre></div>
<p>!!! info “Multiline support in RIDE”
    In order to write multiline functions in the Dyalog RIDE, "Extended Multiline Input" needs to be enabled. It can be found in the Session tab under Options&gt;Configure.</p>
<p>Any code beyond the first statement which produces a value is not evaluated
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">number</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="m">1</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="m">4</span><span class="kt">}</span>
<span class="w">      </span><span class="nv">number</span><span class="w"> </span><span class="no">⍬</span><span class="w"> </span><span class="c1">⍝ The empty vector character ⍬ is added here as filler since functions always require a right argument</span>
<span class="m">1</span>
<span class="w">      </span><span class="nv">separator_test</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="nv">a</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">a</span><span class="kt">}</span>
<span class="w">      </span><span class="nv">separator_test</span><span class="w"> </span><span class="no">⍬</span>
<span class="m">2</span>
</code></pre></div></p>
<p>Recursive functions can be implemented using guarded expressions and the self <code>∇</code> function.</p>
<p>Guarded expressions consist of a boolean/logical expression followed by a colon ”:”, and another expression. For example, ⍵=0: 1. </p>
<p>A guarded expression in a function specifies a condition for whether a statement is evaluated; if the boolean expression evaluates to 1, the function evaluates the statement and the value of the expression is returned. In the above example, if we create a function {⍵=0: 1}, if ⍵ (the right argument) is 0, then the function will return 1.</p>
<p>The self function <code>∇</code> stands for the function it is contained in, allowing calling the function from within itself, that is, allowing recursion. Alternatively, the function name can be used within the function itself.</p>
<p>For example, the factorial function is typically defined as f(n) = n * f(n-1), such that f(0)=1. Thinking in terms of guarded expressions, if the argument of the function is 0 the result should be 1 (in symbols, ⍵=0: 1), otherwise multiply the right argument (⍵) by the result of the function itself (∇) evaluated for the right argument minus 1 (⍵ - 1).  Putting it together,
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">factorial</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="bp">⍵</span><span class="o">=</span><span class="m">0</span><span class="bp">:</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="bp">⍵</span><span class="w"> </span><span class="o">×</span><span class="w"> </span><span class="bp">∇</span><span class="w"> </span><span class="bp">⍵</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="kt">}</span><span class="w"> </span>
</code></pre></div>
This function consists of two statements, separated by the separator ⋄.
The first statement in this function is an example of a guarded expression, if ⍵=0 evaluates to true, that is, when ⍵ is equal to 0, the expression 1 is evaluated. Otherwise, the expression ⍵ × ∇ ⍵ - 1  is evaluated. 
For example, the evaluation of factorial 2 can be visualised as:</p>
<div class="highlight"><pre><span></span><code><span class="w">           </span><span class="kt">{</span><span class="bp">⍵</span><span class="o">=</span><span class="m">0</span><span class="bp">:</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="bp">⍵</span><span class="w"> </span><span class="o">×</span><span class="w"> </span><span class="bp">∇</span><span class="w"> </span><span class="bp">⍵</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="kt">}</span><span class="w"> </span><span class="m">2</span>
<span class="w">      </span><span class="c1">⍝    Since 2=0 is 0, the guarded statement is not evaluated.</span>
<span class="w">      </span><span class="c1">⍝    2 × ∇ 1</span>
<span class="w">      </span><span class="c1">⍝    2 × {⍵=0: 1 ⋄ ⍵ × ∇ ⍵ - 1} 1</span>
<span class="w">      </span><span class="c1">⍝    Since 1=0 is 0, the guarded statement is not evaluated.</span>
<span class="w">      </span><span class="c1">⍝    2 × 1 × ∇ 0</span>
<span class="w">      </span><span class="c1">⍝    2 × 1 × {⍵=0: 1 ⋄ ⍵ × ∇ ⍵ - 1} 0</span>
<span class="w">      </span><span class="c1">⍝    Since 0=0 is 1, the guarded statement is evaluated.</span>
<span class="w">      </span><span class="c1">⍝    2 × 1 × 1</span>
<span class="w">      </span><span class="nv">factorial</span><span class="w"> </span><span class="m">2</span>
<span class="m">2</span>
<span class="w">      </span><span class="nv">factorial</span><span class="w"> </span><span class="m">3</span>
<span class="m">6</span>
<span class="w">      </span><span class="nv">factorial</span><span class="w"> </span><span class="m">4</span>
<span class="m">24</span>
</code></pre></div>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">collatz</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="bp">⍵</span><span class="o">=</span><span class="m">1</span><span class="bp">:</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="m">0</span><span class="o">=</span><span class="m">2</span><span class="o">|</span><span class="bp">⍵:</span><span class="w"> </span><span class="bp">⍵</span><span class="w"> </span><span class="o">,</span><span class="w"> </span><span class="bp">∇</span><span class="w"> </span><span class="bp">⍵</span><span class="o">÷</span><span class="m">2</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="bp">⍵</span><span class="w"> </span><span class="o">,</span><span class="w"> </span><span class="bp">∇</span><span class="w"> </span><span class="m">1</span><span class="o">+</span><span class="m">3</span><span class="o">×</span><span class="bp">⍵</span><span class="kt">}</span>
</code></pre></div>
This function keeps track of the evaluation of the following procedure. If the ⍵ is even (see more examples of the dyadic modulo | function), divide it by two. If it is odd, multiply it by three and add one. Evaluate this function until ⍵ reaches 1.</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="c1">⍝ Example:</span>
<span class="w">      </span><span class="c1">⍝     collatz 3 </span>
<span class="w">      </span><span class="c1">⍝     3 , ∇ 1+3×3</span>
<span class="w">      </span><span class="c1">⍝     3 , collatz  1+3×3</span>
<span class="w">      </span><span class="c1">⍝     3 , collatz 10</span>
<span class="w">      </span><span class="c1">⍝     3 , 10 , ∇ 10÷2</span>
<span class="w">      </span><span class="c1">⍝     3 10 , collatz  10÷2</span>
<span class="w">      </span><span class="c1">⍝     3 10 , collatz  5</span>
<span class="w">      </span><span class="c1">⍝     and so on</span>
<span class="w">      </span><span class="nv">collatz</span><span class="w"> </span><span class="m">3</span>
<span class="m">3</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="nv">collatz</span><span class="w"> </span><span class="m">100</span>
<span class="m">100</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">76</span><span class="w"> </span><span class="m">38</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">58</span><span class="w"> </span><span class="m">29</span><span class="w"> </span><span class="m">88</span><span class="w"> </span><span class="m">44</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">34</span><span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">52</span><span class="w"> </span><span class="m">26</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">40</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="nv">collatz</span><span class="w"> </span><span class="m">2</span><span class="o">*</span><span class="m">10</span>
<span class="m">1024</span><span class="w"> </span><span class="m">512</span><span class="w"> </span><span class="m">256</span><span class="w"> </span><span class="m">128</span><span class="w"> </span><span class="m">64</span><span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
<p>It is possible to have direct operators “dop”s as well, which act on functions to modify how they work. Consider the following example.
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="nv">Swap</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="bp">⍺</span><span class="kd">←</span><span class="bp">⍵</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="bp">⍵</span><span class="w"> </span><span class="bp">⍺⍺</span><span class="w"> </span><span class="bp">⍺</span><span class="kt">}</span>
<span class="w">       </span><span class="m">1</span><span class="w"> </span><span class="o">-</span><span class="nv">Swap</span><span class="w"> </span><span class="m">2</span>
<span class="m">1</span>
<span class="w">       </span><span class="m">10</span><span class="w"> </span><span class="o">÷</span><span class="nv">Swap</span><span class="w"> </span><span class="m">2</span>
<span class="m">0.2</span>
<span class="w">       </span><span class="o">+</span><span class="nv">Swap</span><span class="w"> </span><span class="m">5</span>
<span class="m">10</span>
</code></pre></div></p>
<p>This is the commute ⍨ operator written as a direct operator.</p>
<p>The symbols ⍺⍺ and ⍵⍵ represent the left and right function arguments to the operator, in this case ⍺⍺ is the left function argument of Swap, and ⍺ and ⍵ are the arguments of the modified function. Contrary to direct functions, direct operators always take a left function argument. In symbols, for an operator F, the arguments are labelled as ⍺ (⍺⍺F⍵⍵) ⍵. </p>
<p>One useful application is modifying the arithmetic operators. Decibels are logarithmic units for which the usual arithmetic operations have to be modified, for example, 60 decibels are 1000 times larger than 30 decibels. In order to reduce these calculations to standard arithmetic, the numbers need to be converted from decibels to a power ratio, then back after the operation is applied.</p>
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="nv">dB_to_ratio</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="m">10</span><span class="o">*</span><span class="bp">⍵</span><span class="o">÷</span><span class="m">10</span><span class="kt">}</span>
<span class="w">       </span><span class="nv">ratio_to_dB</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="m">10</span><span class="o">×</span><span class="m">10</span><span class="o">⍟</span><span class="bp">⍵</span><span class="kt">}</span>
<span class="w">       </span><span class="nv">DB</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="nv">ratio_to_dB</span><span class="w"> </span><span class="p">(</span><span class="nv">dB_to_ratio</span><span class="w"> </span><span class="bp">⍺</span><span class="p">)</span><span class="w"> </span><span class="bp">⍺⍺</span><span class="w"> </span><span class="p">(</span><span class="nv">dB_to_ratio</span><span class="w"> </span><span class="bp">⍵</span><span class="p">)</span><span class="kt">}</span>
<span class="w">       </span><span class="m">1</span><span class="w"> </span><span class="o">+</span><span class="nv">DB</span><span class="w"> </span><span class="m">1</span>
<span class="m">4</span>
<span class="w">       </span><span class="m">60</span><span class="w"> </span><span class="o">÷</span><span class="nv">DB</span><span class="w"> </span><span class="m">30</span>
<span class="m">30</span>
<span class="w">       </span><span class="nv">dB_to_ratio</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="o">÷</span><span class="nv">DB</span><span class="w"> </span><span class="m">30</span>
<span class="m">1000</span>
<span class="w">       </span><span class="m">5</span><span class="w"> </span><span class="o">×</span><span class="nv">DB</span><span class="w"> </span><span class="m">16</span>
<span class="m">21</span>
<span class="w">       </span><span class="m">21</span><span class="w"> </span><span class="o">÷</span><span class="nv">DB</span><span class="w"> </span><span class="m">5</span>
<span class="m">16</span>
</code></pre></div>
<p>From this example, we see that multiplication and division of logarithmic units are equivalent to adding and subtracting, as would be expected. Recursion can also be used in a dop (”dee-op”) using the ∇∇ symbol.</p>
<p>Another way of defining functions is using traditional functions, abbreviated tradfn. (”trad-fun”) These functions look a lot more similar to functions in imperative programming languages.</p>
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="bp">∇</span><span class="w"> </span><span class="p">(</span><span class="nv">R1</span><span class="w"> </span><span class="nv">R2</span><span class="p">)</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">solve_quadratic</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="sr">;</span><span class="nv">root</span><span class="sr">;</span><span class="nv">vertex</span><span class="w"> </span>
<span class="w">          </span><span class="nv">root</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="p">((</span><span class="nv">B</span><span class="o">*</span><span class="m">2</span><span class="p">)</span><span class="o">-</span><span class="m">4</span><span class="o">×</span><span class="nv">A</span><span class="o">×</span><span class="nv">C</span><span class="p">)</span><span class="o">*</span><span class="m">1</span><span class="o">÷</span><span class="m">2</span>
<span class="w">          </span><span class="nv">vertex</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="o">-</span><span class="nv">B</span><span class="o">÷</span><span class="m">2</span><span class="o">×</span><span class="nv">A</span>
<span class="w">          </span><span class="nv">R1</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">vertex</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">root</span><span class="o">÷</span><span class="m">2</span><span class="o">×</span><span class="nv">A</span>
<span class="w">          </span><span class="nv">R2</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">vertex</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">root</span><span class="o">÷</span><span class="m">2</span><span class="o">×</span><span class="nv">A</span>
<span class="w">       </span><span class="bp">∇</span>
<span class="w">       </span><span class="nv">solve_quadratic</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">¯1</span>
<span class="m">1.618033989</span><span class="w"> </span><span class="m">¯0.6180339887</span>

<span class="w">       </span><span class="c1">⍝ ∇ results ← name arguments;local_variable1;local_variable2</span>
<span class="w">       </span><span class="c1">⍝   ...</span>
<span class="w">       </span><span class="c1">⍝   Instructions</span>
<span class="w">       </span><span class="c1">⍝   ...</span>
<span class="w">       </span><span class="c1">⍝   results ← values</span>
<span class="w">       </span><span class="c1">⍝ ∇</span>
</code></pre></div>
<p>Tradfns are delimited by dels ∇ and consist of a header and body. The header defines the (left or right) arguments, the variables which are local to that function (variables which do not affect the rest of the workspace), and the values that are returned. If we try to access any of the local variables of the function outside the function, we will encounter an error.</p>
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="nv">R1</span>
<span class="nv">VALUE</span><span class="w"> </span><span class="nv">ERROR</span><span class="bp">:</span><span class="w"> </span><span class="nv">Undefined</span><span class="w"> </span><span class="nv">name</span><span class="bp">:</span><span class="w"> </span><span class="nv">R1</span>
<span class="w">       </span><span class="nv">vertex</span>
<span class="nv">VALUE</span><span class="w"> </span><span class="nv">ERROR</span><span class="bp">:</span><span class="w"> </span><span class="nv">Undefined</span><span class="w"> </span><span class="nv">name</span><span class="bp">:</span><span class="w"> </span><span class="nv">vertex</span>
</code></pre></div>
<p>Instead of guarded expressions, there are control flow structures like :If and :For, we will see these structures in Chapter 7.</p>
<div class="admonition warn">
<p class="admonition-title">Variable Scope</p>
<p>In tradfns, variables outside the function can be accessed and modified unless specified to be local. In dfns however, while it is possible to access variables outside the function, it is not possible to assign to them.
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="nv">i</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">10</span>
<span class="w">       </span><span class="nv">d_increment</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="nv">i</span><span class="kd">←</span><span class="nv">i</span><span class="o">+</span><span class="m">1</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">i</span><span class="kt">}</span>

<span class="w">       </span><span class="nv">i</span>
<span class="m">10</span>
<span class="w">       </span><span class="nv">increment</span><span class="w"> </span><span class="no">⍬</span>
<span class="m">11</span><span class="w">  </span>
<span class="w">       </span><span class="nv">i</span>
<span class="m">10</span>

<span class="w">       </span><span class="bp">∇</span><span class="w"> </span><span class="nv">res</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">t_increment</span>
<span class="w">          </span><span class="nv">i</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">i</span><span class="o">+</span><span class="m">1</span>
<span class="w">           </span><span class="nv">res</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">i</span>
<span class="w">       </span><span class="bp">∇</span>

<span class="w">       </span><span class="nv">i</span>
<span class="m">10</span>
<span class="w">       </span><span class="nv">t_increment</span>
<span class="m">11</span>
<span class="w">       </span><span class="nv">i</span>
<span class="m">11</span>
</code></pre></div></p>
</div>
<p>The follwing code gets the final velocities of a one-dimensional perfectly elastic collision of two objects with initial velocities u1 and u2 and masses m1 and m2.
<div class="highlight"><pre><span></span><code><span class="w">   </span><span class="bp">∇</span><span class="w"> </span><span class="p">(</span><span class="nv">v1</span><span class="w"> </span><span class="nv">v2</span><span class="p">)</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">collision</span><span class="w"> </span><span class="p">(</span><span class="nv">u1</span><span class="w"> </span><span class="nv">u2</span><span class="w"> </span><span class="nv">m1</span><span class="w"> </span><span class="nv">m2</span><span class="p">)</span><span class="sr">;</span><span class="nv">rsumM</span><span class="sr">;</span><span class="nv">diffM</span>
<span class="w">      </span><span class="nv">rsumM</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="o">÷</span><span class="nv">m1</span><span class="o">+</span><span class="nv">m2</span>
<span class="w">      </span><span class="nv">diffM</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">m1</span><span class="o">-</span><span class="nv">m2</span>
<span class="w">      </span><span class="nv">v1</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="p">(</span><span class="nv">diffM</span><span class="w"> </span><span class="o">×</span><span class="w"> </span><span class="nv">rsumM</span><span class="w"> </span><span class="o">×</span><span class="w"> </span><span class="nv">u1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">×</span><span class="w"> </span><span class="nv">m2</span><span class="w"> </span><span class="o">×</span><span class="w"> </span><span class="nv">rsumM</span><span class="w"> </span><span class="o">×</span><span class="w"> </span><span class="nv">u2</span>
<span class="w">      </span><span class="nv">v2</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="o">×</span><span class="w"> </span><span class="nv">m1</span><span class="w"> </span><span class="o">×</span><span class="w"> </span><span class="nv">rsumM</span><span class="w"> </span><span class="o">×</span><span class="w"> </span><span class="nv">u1</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">diffM</span><span class="w"> </span><span class="o">×</span><span class="w"> </span><span class="nv">rsumM</span><span class="w"> </span><span class="o">×</span><span class="w"> </span><span class="nv">u2</span>
<span class="w">   </span><span class="bp">∇</span>
<span class="w">   </span><span class="c1">⍝ Collision of two object moving with opposite velocities towards each other</span>
<span class="w">   </span><span class="c1">⍝ where one object is twice as massive</span>
<span class="w">   </span><span class="c1">⍝ ∘→  ←○</span>
<span class="w">   </span><span class="nv">collision</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span>
<span class="m">¯1.666666667</span><span class="w"> </span><span class="m">0.3333333333</span>
</code></pre></div></p>
<p>As with dops, there are also tradops. Here is the commute ⍨ operator and the decibel operator written as tradops.</p>
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="bp">∇</span><span class="w"> </span><span class="nv">result</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="nv">left</span><span class="kt">}</span><span class="w"> </span><span class="p">(</span><span class="nv">F</span><span class="w"> </span><span class="nv">Swap</span><span class="p">)</span><span class="w"> </span><span class="nv">right</span>
<span class="w">          </span><span class="bp">:</span><span class="nv">If</span><span class="w"> </span><span class="m">0</span><span class="o">=</span><span class="nf">⎕NC</span><span class="s1">&#39;left&#39;</span>
<span class="w">           </span><span class="nv">result</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">right</span>
<span class="w">          </span><span class="bp">:</span><span class="nv">Else</span>
<span class="w">           </span><span class="nv">result</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">left</span>
<span class="w">          </span><span class="bp">:</span><span class="nv">EndIf</span>
<span class="w">       </span><span class="bp">∇</span>

<span class="w">       </span><span class="nv">dB_to_ratio</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="m">10</span><span class="o">*</span><span class="bp">⍵</span><span class="o">÷</span><span class="m">10</span><span class="kt">}</span>
<span class="w">       </span><span class="nv">ratio_to_dB</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="m">10</span><span class="o">×</span><span class="m">10</span><span class="o">⍟</span><span class="bp">⍵</span><span class="kt">}</span>
<span class="w">       </span><span class="bp">∇</span><span class="w"> </span><span class="nv">result</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">left</span><span class="w"> </span><span class="p">(</span><span class="nv">F</span><span class="w"> </span><span class="nv">DB</span><span class="p">)</span><span class="w"> </span><span class="nv">right</span><span class="sr">;</span><span class="nv">dB_left</span><span class="sr">;</span><span class="nv">dB_right</span>
<span class="w">          </span><span class="nv">dB_left</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">dB_to_ratio</span><span class="w"> </span><span class="nv">left</span>
<span class="w">          </span><span class="nv">dB_right</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">dB_to_ratio</span><span class="w"> </span><span class="nv">right</span>
<span class="w">          </span><span class="nv">result</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">ratio_to_dB</span><span class="w"> </span><span class="nv">dB_left</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">dB_right</span>
<span class="w">       </span><span class="bp">∇</span>
</code></pre></div>
<p>:If operates similarly to the guarded expressions defined above, if the statement provided to the right of :If evaluates to a 1, then the expressions after :If but before :Else and :EndIf are evaluated. Otherwise, the expressions after :Else and before :EndIf are evaluated.</p>
<p>Notice that optional left arguments are written in braces. The function ⎕NC returns the “name class” for a particular name, that is, whether the name refers to a function, variable, operator, etc. For an undefined name, the value 0 is returned. Some useful commands to keep in mind are )ERASE and )CLEAR, the former undefines a specific value given as right argument, and the latter clears the entire workspace.</p>
<p>In the next section, most built-in mathematical operations are introduced, along with plenty of examples to clarify their use.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "nagivation.top", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.94c44541.min.js"></script>
      
        <script src="../../../js/mooc.js"></script>
      
        <script src="../../../js/languagebar.js"></script>
      
    
  </body>
</html>